{"ast":null,"code":"import _slicedToArray from\"/Users/mart/Documents/code/cinemaSave/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useParams}from\"react-router-dom\";import React,{useEffect,useState}from'react';import movieFunctions from\"../api/index\";import{ReactSession}from'react-client-session';// style sheets\nimport'./moviesm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MovieSM=function MovieSM(props){var userid=ReactSession.get(\"userid\");var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),streamMovie=_useState4[0],setStreamMovie=_useState4[1];useEffect(function(){movieFunctions.getByID({'movie_id':id,'user_id':userid}).then(function(response){console.log('promise fulfilled');var res=response.data;return res;}).then(function(res){setMovie(res.movie);setStreamMovie(res.streamMovie);});},[]);var handleButtonClick=function handleButtonClick(e){fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/addpin/',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({'movie_id':id,'user_id':userid})}).then(function(response){var req=response.json();return req;});};var services=streamMovie.slice(0,3).map(function(service){return/*#__PURE__*/_jsx(\"div\",{className:\"streamLogo\",children:/*#__PURE__*/_jsx(\"a\",{href:service[0],children:/*#__PURE__*/_jsx(\"img\",{src:service[2],alt:service[3]})})});});var genres=movie.genre+'';genres=genres.split(',');var allgenres=genres.map(function(i){return/*#__PURE__*/_jsx(\"div\",{className:\"genre\",children:i});});return/*#__PURE__*/_jsx(\"div\",{className:\"movie-show-pg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"movie-container-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"movie-container-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-left\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"poster\",src:movie.poster,alt:\"\".concat(movie.title,\" poster\")}),/*#__PURE__*/_jsx(\"div\",{className:\"save-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:function onClick(){return handleButtonClick({'movieID':movie._id,'userID':userid});}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-desrip-show\",children:[/*#__PURE__*/_jsx(\"h1\",{children:movie.title}),/*#__PURE__*/_jsx(\"h3\",{children:movie.imdbRating}),/*#__PURE__*/_jsx(\"div\",{className:\"allgenres\",children:allgenres}),/*#__PURE__*/_jsx(\"h4\",{children:movie.description}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"languages: \",movie.languages]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"streamContainerParent\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Watch it here:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"streamContainer\",children:services})]})]})});};","map":{"version":3,"sources":["/Users/mart/Documents/code/cinemaSave/client/src/components/MovieSM.jsx"],"names":["useParams","React","useEffect","useState","movieFunctions","ReactSession","MovieSM","props","userid","get","id","movie","setMovie","streamMovie","setStreamMovie","getByID","then","response","console","log","res","data","handleButtonClick","e","fetch","method","headers","body","JSON","stringify","req","json","services","slice","map","service","genres","genre","split","allgenres","i","poster","title","_id","imdbRating","description","languages"],"mappings":"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","sourcesContent":["import { useParams } from \"react-router-dom\";\nimport React, { useEffect, useState } from 'react'\nimport movieFunctions from \"../api/index\"\nimport { ReactSession } from 'react-client-session';\n\n// style sheets\nimport './moviesm.css';\n\nexport const MovieSM = (props) => {\n    const userid = ReactSession.get(\"userid\");\n    const { id } = useParams();\n    const [movie, setMovie] = useState([]);\n    const [streamMovie, setStreamMovie] = useState([]);\n    \n      useEffect(() => {\n        movieFunctions\n          .getByID({\n            'movie_id': id,\n            'user_id': userid\n          })\n          .then((response) => {\n              console.log('promise fulfilled')\n              let res = response.data\n              return res\n          })\n        .then((res) => {\n            setMovie(res.movie)\n            setStreamMovie(res.streamMovie)\n          })\n      }, []);\n\n    const handleButtonClick = (e) => {\n      fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/addpin/', {\n        method: 'POST',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          'movie_id': id,\n          'user_id': userid\n        })\n      }).then((response) => {\n        let req = response.json()\n        return req\n      })\n  }\n\n  const services = streamMovie.slice(0,3).map((service)=>{\n    return(\n      <div className=\"streamLogo\">\n          <a href={service[0]}><img src={service[2]} alt={service[3]} /></a>\n      </div>\n    )\n  })\n\n  let genres = movie.genre + ''\n  genres = genres.split(',')\n \n  const allgenres = genres.map((i) => {\n    return (\n      <div className='genre'>\n        { i }\n      </div>)\n  });\n\n    return (\n      <div className=\"movie-show-pg\">\n        <div className=\"movie-container-col\">\n          <div className=\"movie-container-row\">\n            <div className=\"div-left\">\n              <img className=\"poster\" src={movie.poster} alt={`${movie.title} poster`} />\n              <div className='save-btn-container'><button className='save-btn' onClick={() => handleButtonClick({ 'movieID': movie._id, 'userID': userid })}></button></div>\n            </div>\n            <div className=\"movie-desrip-show\">\n              <h1>{movie.title}</h1>\n              <h3>{movie.imdbRating}</h3>\n              <div className=\"allgenres\">{allgenres}</div>\n              <h4>{movie.description}</h4>\n              <h5>languages: {movie.languages}</h5>\n            </div>\n          </div>\n          <div className=\"streamContainerParent\">\n              <h5>Watch it here:</h5>\n              <div className=\"streamContainer\">\n                {services}\n              </div>\n            </div>\n        </div>\n      </div>\n\n    );\n}\n"]},"metadata":{},"sourceType":"module"}