{"ast":null,"code":"import _slicedToArray from\"/Users/mart/Documents/code/cinemaSave/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Navigate}from'react-router-dom';import{ReactSession}from'react-client-session';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loggedin=_useState6[0],setLogin=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),id=_useState8[0],setID=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();var user={username:username,password:password};fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/login/',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user)}).then(function(response){console.log('logged in');var req=response.json();return req;}).then(function(req){if(req!=='success'){setID(req.user_id);setLogin(true);ReactSession.set(\"username\",req.username);ReactSession.set(\"userid\",req.user_id);}});};if(loggedin===true&&id!==\" \"){return/*#__PURE__*/_jsx(Navigate,{push:true,to:{pathname:\"/profile/\".concat(id)}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"welcome\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit.bind(this),children:[/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",id:\"username\",name:\"username\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"form-label\",for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"password\",id:\"password\",name:\"password\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-success\",children:\"Login\"})]})]});}export default Login;","map":{"version":3,"sources":["/Users/mart/Documents/code/cinemaSave/client/src/pages/Login.jsx"],"names":["React","useState","Navigate","ReactSession","Login","props","username","setUsername","password","setPassword","loggedin","setLogin","id","setID","handleSubmit","e","preventDefault","user","fetch","method","headers","body","JSON","stringify","then","response","console","log","req","json","user_id","set","pathname","bind","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Navigate } from 'react-router-dom';\n\nimport {ReactSession} from 'react-client-session';\n\n\nfunction Login(props) {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [loggedin, setLogin] = useState(false);\n    const [id, setID] = useState('');\n    \n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const user = { username, password };\n\n        fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/login/', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(user)\n        }).then((response) => {\n            console.log('logged in');\n            let req = response.json()\n            return req\n        }).then((req) => {\n            if (req !== 'success') {\n                setID(req.user_id);\n                setLogin(true);\n                ReactSession.set(\"username\", req.username);\n                ReactSession.set(\"userid\", req.user_id);\n            }\n        })\n    }\n\n    if (loggedin === true && id !== \" \") {\n        return <Navigate push to={{\n            pathname: `/profile/${id}`\n          }}\n        />\n    }\n  \n  return (\n    <div className=\"login\">\n        <div class=\"welcome\">\n            <h1>Login</h1> \n        </div>\n        <form onSubmit={handleSubmit.bind(this)}>\n            <div class=\"mb-3\">\n                <label class=\"form-label\">Username</label>\n                <input\n                      class=\"form-control\"\n                      type=\"text\"\n                      id=\"username\"\n                      name=\"username\"\n                      required\n                      onChange={(e) => setUsername(e.target.value)}\n                  />\n            </div>\n            <div class=\"mb-3\">\n                <label class=\"form-label\" for=\"password\">Password</label>\n                <input\n                      class=\"form-control\"\n                      type=\"password\"\n                      id=\"password\"\n                      name=\"password\"\n                      required\n                      onChange={(e) => setPassword(e.target.value)}\n                />\n            </div>\n            <button class=\"btn btn-success\">Login</button>\n          </form>\n    </div>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}