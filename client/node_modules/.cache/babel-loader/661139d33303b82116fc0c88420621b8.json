{"ast":null,"code":"import _slicedToArray from\"/Users/mart/Documents/code/cinemaSave/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ReactSession}from'react-client-session';import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import movieFunctions from\"../api/index.js\";import{BoardPopup}from'../components/BoardPopup.jsx';import{BoardsProfile}from'../components/BoardsProfile';import{Navbar}from'../components/Navbar.jsx';// style sheets\nimport'./profile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){var userid=ReactSession.get(\"userid\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pins=_useState2[0],setPins=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),boards=_useState4[0],setBoards=_useState4[1];var _useState5=useState(Boolean),_useState6=_slicedToArray(_useState5,2),popupval=_useState6[0],setPopupVal=_useState6[1];useEffect(function(){movieFunctions.getProfile(userid).then(function(response){console.log('promise fulfilled');return response.data;}).then(function(response){try{setPins(response.pins);setBoards(response.boards);}catch(e){console.log(e);}});},[]);var handleShareButton=function handleShareButton(){var userProfileLink=document.getElementById(\"userProfileLink\");userProfileLink.select();navigator.clipboard.writeText(userProfileLink.value);};var handleButtonClick=function handleButtonClick(props){fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/deletepin/',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(props)}).then(function(response){response=response.json();return response;}).then(function(data){try{setPins(data.pins);setBoards(data.boards);}catch(e){console.log(e);}});};var handleAddButton=function handleAddButton(){setPopupVal(true);};var allPins=pins.slice(0).reverse().map(function(i){return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-contianer-profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:i.poster,alt:\"\".concat(i.title,\" poster\"),className:\"poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-descrip\",children:[/*#__PURE__*/_jsx(\"h3\",{children:i.title}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"imdb: \",i.imdbRating,\" \"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"genre(s): \",i.genre,\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"removeBtn\",onClick:function onClick(){return handleButtonClick({'movieID':i._id,'userID':userid});},children:\"remove\"})]});});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile pgMargin\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"userProfileLink\",value:window.location.href,type:\"text\",hidden:true}),/*#__PURE__*/_jsx(\"img\",{className:\"profile-img\",src:\"https://res.cloudinary.com/dr0ofxgkz/image/upload/v1640501510/cinema-save/theater-img_w5f8yz.jpg\",alt:\"profile-pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"share\",children:[/*#__PURE__*/_jsx(\"h1\",{children:ReactSession.get(\"username\")}),/*#__PURE__*/_jsx(\"img\",{onClick:handleShareButton,src:\"https://res.cloudinary.com/dr0ofxgkz/image/upload/v1640736464/cinema-save/logo/share_lre6s2.png\",alt:\"share-logo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"boards-header\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Boards\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"addBtn\",onClick:handleAddButton,children:\"+\"})})]}),/*#__PURE__*/_jsx(BoardsProfile,{data:userid}),/*#__PURE__*/_jsx(BoardPopup,{value:popupval})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-pins-profile\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"all pins\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-contianer\",children:allPins})]})]});}export default Profile;","map":{"version":3,"sources":["/Users/mart/Documents/code/cinemaSave/client/src/pages/Profile.jsx"],"names":["ReactSession","React","useEffect","useState","Link","movieFunctions","BoardPopup","BoardsProfile","Navbar","Profile","userid","get","pins","setPins","boards","setBoards","Boolean","popupval","setPopupVal","getProfile","then","response","console","log","data","e","handleShareButton","userProfileLink","document","getElementById","select","navigator","clipboard","writeText","value","handleButtonClick","props","fetch","method","headers","body","JSON","stringify","json","handleAddButton","allPins","slice","reverse","map","i","poster","title","imdbRating","genre","_id","window","location","href"],"mappings":"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","sourcesContent":["import { ReactSession } from 'react-client-session';\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport movieFunctions from \"../api/index.js\";\nimport { BoardPopup } from '../components/BoardPopup.jsx';\nimport { BoardsProfile } from '../components/BoardsProfile';\nimport { Navbar } from '../components/Navbar.jsx';\n\n// style sheets\nimport './profile.css';\n\nfunction Profile() {\n  let userid = ReactSession.get(\"userid\")\n  const [pins, setPins] = useState([]);\n  const [boards, setBoards] = useState([]);\n  const [popupval, setPopupVal] = useState(Boolean);\n\n  useEffect(() => {\n    movieFunctions\n      .getProfile(userid)\n      .then((response) => {\n        console.log('promise fulfilled')\n        return response.data\n      })\n      .then((response) => {\n        try {\n          setPins(response.pins)\n          setBoards(response.boards)\n        } catch (e) {\n          console.log(e)\n        }\n      })\n  }, []);\n\n  const handleShareButton = () => {\n    const userProfileLink = document.getElementById(\"userProfileLink\")\n    userProfileLink.select();\n    navigator.clipboard.writeText(userProfileLink.value);\n  }\n\n  const handleButtonClick = (props) => {\n    \n    fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/deletepin/', {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(props)\n    }).then((response) => {\n      response = response.json()\n      return response\n    }).then((data) => {\n      try {\n        setPins(data.pins)\n        setBoards(data.boards)\n      } catch (e) {\n        console.log(e)\n      }\n    })\n  }\n\n  const handleAddButton = () => {\n    setPopupVal(true)\n  }\n\n  const allPins = pins.slice(0).reverse().map((i) => {\n      return (\n        <div className='movie-contianer-profile'>\n          <img src={i.poster} alt={`${i.title} poster`} className='poster' />\n          <div className='movie-descrip'>\n            <h3>{i.title}</h3>\n            <h5>imdb: {i.imdbRating} </h5>\n            <h5>genre(s): {i.genre} </h5>\n          </div>\n          <br />\n          <button className='removeBtn' onClick={() => handleButtonClick({ 'movieID': i._id, 'userID': userid })}>remove</button>\n        </div>)\n  });\n\n    return (\n      <div className=\"profile pgMargin\">\n        <Navbar />\n        <div className='header'>\n          <input id=\"userProfileLink\" value={window.location.href} type=\"text\" hidden />\n          <img className='profile-img' src=\"https://res.cloudinary.com/dr0ofxgkz/image/upload/v1640501510/cinema-save/theater-img_w5f8yz.jpg\" alt=\"profile-pic\" />\n          <div className='share'>\n            <h1>{ReactSession.get(\"username\")}</h1>\n            <img onClick={handleShareButton} src=\"https://res.cloudinary.com/dr0ofxgkz/image/upload/v1640736464/cinema-save/logo/share_lre6s2.png\" alt=\"share-logo\" />\n          </div>\n        </div>\n        <div>\n          <div className='boards-header'>\n            <div>\n              <h3>Boards</h3>\n            </div>\n            <div><button className='addBtn' onClick={handleAddButton} >+</button></div>\n          </div>\n          <BoardsProfile data={ userid } />\n          <BoardPopup value={ popupval } />\n        </div>\n        <hr />\n        <div className='all-pins-profile'>\n          <h2>all pins</h2>\n          <div className='movies-contianer'>\n              {allPins}\n          </div>\n        </div>\n      </div>\n      );\n}\n  \nexport default Profile;\n  \n"]},"metadata":{},"sourceType":"module"}