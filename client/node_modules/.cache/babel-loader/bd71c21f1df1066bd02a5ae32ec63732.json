{"ast":null,"code":"import _slicedToArray from\"/Users/mart/Documents/code/cinemaSave/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';// import { Navigate } from 'react-router-dom';\nimport{Route,Link}from'react-router-dom';import movieFunctions from\"../api/index.js\";import{MovieSM}from'../components/MovieSM';// style sheets\nimport'../pages/home.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PinReccomendations=function PinReccomendations(props){var handleMovieID=function handleMovieID(props){var id=props;fetch('https://enigmatic-sierra-36050.herokuapp.com/movie/id',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:id})}).then(function(response){var req=response.json();return req;}).then(function(req){if(req!==undefined){/*#__PURE__*/_jsx(Route,{to:\"/movie/:\".concat(id),component:MovieSM});}});};var handleButtonClick=function handleButtonClick(props){fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/addpin/',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(props)}).then(function(response){var req=response.json();return req;});};var userid=props.userid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),moveieSubset=_useState4[0],setMovieSubset=_useState4[1];var _useState5=useState(Number),_useState6=_slicedToArray(_useState5,2),subsetSlice=_useState6[0],setSubsetSlice=_useState6[1];useEffect(function(){movieFunctions.getAll(userid).then(function(response){console.log('promise fulfilled');setMovies(response.data);setMovieSubset(response.data.splice(0,50));setSubsetSlice(50);});},[]);var handleLoadMore=function handleLoadMore(){var newSubset=subsetSlice+50;var newMovies=movie.slice(subsetSlice,newSubset);if(newSubset<movie.length){setSubsetSlice(newSubset);setMovieSubset(newMovies);}};var movies=moveieSubset.map(function(i){return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/movie/\".concat(i._id),onClick:function onClick(){return handleMovieID(i._id);},style:{textDecoration:'none',color:'black'},children:/*#__PURE__*/_jsx(\"img\",{src:i.poster,alt:\"\".concat(i.title,\" poster\"),className:\"poster\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-descrip\",children:[/*#__PURE__*/_jsx(\"h3\",{children:i.title}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"imdb: \",i.imdbRating,\" \"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"genre(s): \",i.genre,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"save-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:function onClick(){return handleButtonClick({'movieID':i._id,'userID':userid});}})})]});});return/*#__PURE__*/_jsxs(\"div\",{className:\"pinrec\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"movies-contianer\",children:movies}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLoadMore,children:\"Load More\"})]});};","map":{"version":3,"sources":["/Users/mart/Documents/code/cinemaSave/client/src/components/PinReccomendations.jsx"],"names":["React","useEffect","useState","Route","Link","movieFunctions","MovieSM","PinReccomendations","props","handleMovieID","id","fetch","method","headers","body","JSON","stringify","then","response","req","json","undefined","handleButtonClick","userid","movie","setMovies","moveieSubset","setMovieSubset","Number","subsetSlice","setSubsetSlice","getAll","console","log","data","splice","handleLoadMore","newSubset","newMovies","slice","length","movies","map","i","_id","textDecoration","color","poster","title","imdbRating","genre"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA;AACA,OAASC,KAAT,CAAgBC,IAAhB,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,iBAA3B,CACA,OAASC,OAAT,KAAwB,uBAAxB,CAEA;AACA,MAAO,mBAAP,C,wFAEA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAW,CACzC,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACD,KAAD,CAAW,CACjC,GAAME,CAAAA,EAAE,CAAGF,KAAX,CAEAG,KAAK,CAAC,uDAAD,CAA0D,CAC3DC,MAAM,CAAE,MADmD,CAE3DC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFkD,CAG3DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,EAAE,CAAFA,EAAF,CAAf,CAHqD,CAA1D,CAAL,CAIGO,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClB,GAAIC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAAT,EAAV,CACA,MAAOD,CAAAA,GAAP,CACH,CAPD,EAOGF,IAPH,CAOQ,SAACE,GAAD,CAAS,CACb,GAAIA,GAAG,GAAKE,SAAZ,CAAuB,CACvB,kBAAC,KAAD,EAAO,EAAE,mBAAaX,EAAb,CAAT,CAA4B,SAAS,CAAEJ,OAAvC,GACC,CACJ,CAXD,EAYC,CAfD,CAiBA,GAAMgB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACd,KAAD,CAAW,CAEjCG,KAAK,CAAC,6EAAD,CAAgF,CACnFC,MAAM,CAAE,MAD2E,CAEnFC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAF0E,CAGnFC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,KAAf,CAH6E,CAAhF,CAAL,CAIGS,IAJH,CAIQ,SAACC,QAAD,CAAc,CACpB,GAAIC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAAT,EAAV,CACA,MAAOD,CAAAA,GAAP,CACD,CAPD,EAQD,CAVH,CAYA,GAAMI,CAAAA,MAAM,CAAGf,KAAK,CAACe,MAArB,CACA,cAA2BrB,QAAQ,CAAC,EAAD,CAAnC,wCAAOsB,KAAP,eAAcC,SAAd,eACA,eAAuCvB,QAAQ,CAAC,EAAD,CAA/C,yCAAOwB,YAAP,eAAqBC,cAArB,eACA,eAAsCzB,QAAQ,CAAC0B,MAAD,CAA9C,yCAAOC,WAAP,eAAoBC,cAApB,eAEA7B,SAAS,CAAC,UAAM,CACdI,cAAc,CACX0B,MADH,CACUR,MADV,EAEGN,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBc,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAR,SAAS,CAACP,QAAQ,CAACgB,IAAV,CAAT,CACAP,cAAc,CAACT,QAAQ,CAACgB,IAAT,CAAcC,MAAd,CAAqB,CAArB,CAAwB,EAAxB,CAAD,CAAd,CACAL,cAAc,CAAC,EAAD,CAAd,CACD,CAPH,EAQD,CATQ,CASN,EATM,CAAT,CAWA,GAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAK,CAC1B,GAAIC,CAAAA,SAAS,CAAGR,WAAW,CAAG,EAA9B,CACA,GAAIS,CAAAA,SAAS,CAAGd,KAAK,CAACe,KAAN,CAAYV,WAAZ,CAAyBQ,SAAzB,CAAhB,CAEA,GAAGA,SAAS,CAAGb,KAAK,CAACgB,MAArB,CAA4B,CAC1BV,cAAc,CAACO,SAAD,CAAd,CACAV,cAAc,CAACW,SAAD,CAAd,CACD,CACF,CARD,CAUA,GAAMG,CAAAA,MAAM,CAAGf,YAAY,CAACgB,GAAb,CAAiB,SAACC,CAAD,CAAO,CACnC,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,IAAD,EAAM,EAAE,kBAAYA,CAAC,CAACC,GAAd,CAAR,CAA6B,OAAO,CAAE,yBAAMnC,CAAAA,aAAa,CAACkC,CAAC,CAACC,GAAH,CAAnB,EAAtC,CAAkE,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAC,OAAhC,CAAzE,uBAAmH,YAAK,GAAG,CAAEH,CAAC,CAACI,MAAZ,CAAoB,GAAG,WAAMJ,CAAC,CAACK,KAAR,WAAvB,CAA+C,SAAS,CAAC,QAAzD,EAAnH,EADJ,cAEI,aAAK,SAAS,CAAC,eAAf,wBACI,oBAAKL,CAAC,CAACK,KAAP,EADJ,cAEI,+BAAYL,CAAC,CAACM,UAAd,OAFJ,cAGI,mCAAgBN,CAAC,CAACO,KAAlB,OAHJ,GAFJ,cAOI,YAAK,SAAS,CAAC,oBAAf,uBAAoC,eAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,yBAAM5B,CAAAA,iBAAiB,CAAC,CAAE,UAAWqB,CAAC,CAACC,GAAf,CAAoB,SAAUrB,MAA9B,CAAD,CAAvB,EAAtC,EAApC,EAPJ,GADJ,CAUH,CAXc,CAAf,CAaA,mBACI,aAAK,SAAS,CAAC,QAAf,wBACE,YAAK,SAAS,CAAC,kBAAf,UACMkB,MADN,EADF,cAKE,eAAQ,OAAO,CAAEL,cAAjB,uBALF,GADJ,CASH,CA9EM","sourcesContent":["import React, { useEffect, useState } from 'react'\n// import { Navigate } from 'react-router-dom';\nimport { Route, Link } from 'react-router-dom';\nimport movieFunctions from \"../api/index.js\"\nimport { MovieSM } from '../components/MovieSM';\n\n// style sheets\nimport '../pages/home.css';\n\nexport const PinReccomendations = (props) => {\n    const handleMovieID = (props) => {\n    const id = props;\n          \n    fetch('https://enigmatic-sierra-36050.herokuapp.com/movie/id', {\n        method: 'POST',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ id })\n    }).then((response) => {\n        let req = response.json()\n        return req\n    }).then((req) => {\n        if (req !== undefined) {\n        <Route to={`/movie/:${id}`} component={MovieSM} />\n        }\n    })\n    }\n      \n    const handleButtonClick = (props) => {\n          \n        fetch('https://enigmatic-sierra-36050.herokuapp.com/authentication/profile/addpin/', {\n          method: 'POST',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(props)\n        }).then((response) => {\n          let req = response.json()\n          return req\n        })\n      }\n\n    const userid = props.userid;\n    const [movie, setMovies] = useState([]);\n    const [moveieSubset, setMovieSubset] = useState([]);\n    const [subsetSlice, setSubsetSlice] = useState(Number);\n  \n    useEffect(() => {\n      movieFunctions\n        .getAll(userid)\n        .then((response) => {\n          console.log('promise fulfilled')\n          setMovies(response.data)\n          setMovieSubset(response.data.splice(0, 50));\n          setSubsetSlice(50);\n        })\n    }, []);\n\n    const handleLoadMore = () =>{\n      let newSubset = subsetSlice + 50;\n      let newMovies = movie.slice(subsetSlice, newSubset) \n\n      if(newSubset < movie.length){\n        setSubsetSlice(newSubset)\n        setMovieSubset(newMovies)\n      }\n    }\n\n    const movies = moveieSubset.map((i) => {\n        return (\n            <div className='movie-container'>\n                <Link to={`/movie/${i._id}`} onClick={() => handleMovieID(i._id)} style={{ textDecoration: 'none', color:'black'}}><img src={i.poster} alt={ `${i.title} poster`} className='poster'/></Link>\n                <div className='movie-descrip'>\n                    <h3>{i.title}</h3>\n                    <h5>imdb: { i.imdbRating } </h5>\n                    <h5>genre(s): { i.genre } </h5>\n                </div>\n                <div className='save-btn-container'><button className='save-btn' onClick={() => handleButtonClick({ 'movieID': i._id, 'userID': userid })}></button></div>\n            </div>)\n    });\n    \n    return (\n        <div className='pinrec'>\n          <div className='movies-contianer'>\n              { movies }\n          </div>\n\n          <button onClick={handleLoadMore}>Load More</button>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}